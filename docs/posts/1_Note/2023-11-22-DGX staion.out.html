<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.527">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="GUEBIN CHOI">
<meta name="dcterms.date" content="2023-11-22">

<title>Seoyeon’s Blog - [Note] DGX station 설정_메모 추가</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Seoyeon’s Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://seoyeonc.github.io/md/"> 
<span class="menu-text">Lectures_ing</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://seoyeonc.github.io/chch/"> 
<span class="menu-text">Lectures_fastai</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://seoyeonc.github.io/Research_area/"> 
<span class="menu-text">Research_ing</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://seoyeonc.github.io/ms/"> 
<span class="menu-text">Research_fastai</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://seoyeonc.github.io/GODE_blog/"> 
<span class="menu-text">GODE</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://seoyeonc.github.io/HCAM_blog/"> 
<span class="menu-text">HCAM</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://seoyeonc.github.io/ITTGNN_blog/"> 
<span class="menu-text">ITTGNN</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/seoyeonc"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">[Note] DGX station 설정_메모 추가</li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">[Note] DGX station 설정_메모 추가</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>GUEBIN CHOI </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 22, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../1_note.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Note</strong></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text"><strong>Studies</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../2_graph.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Graph</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#mig" id="toc-mig" class="nav-link active" data-scroll-target="#mig">1. MIG</a>
  <ul class="collapse">
  <li><a href="#a.-mig-모드-enable" id="toc-a.-mig-모드-enable" class="nav-link" data-scroll-target="#a.-mig-모드-enable">A. MIG 모드 enable</a></li>
  <li><a href="#b.-gpu-gi-ci-확인" id="toc-b.-gpu-gi-ci-확인" class="nav-link" data-scroll-target="#b.-gpu-gi-ci-확인">B. GPU, GI, CI 확인</a></li>
  <li><a href="#c.-gi-생성" id="toc-c.-gi-생성" class="nav-link" data-scroll-target="#c.-gi-생성">C. GI 생성</a></li>
  <li><a href="#d.-ci-생성" id="toc-d.-ci-생성" class="nav-link" data-scroll-target="#d.-ci-생성">D. CI 생성</a></li>
  </ul></li>
  <li><a href="#docker" id="toc-docker" class="nav-link" data-scroll-target="#docker">2. DOCKER</a>
  <ul class="collapse">
  <li><a href="#a.-컨테이너-생성" id="toc-a.-컨테이너-생성" class="nav-link" data-scroll-target="#a.-컨테이너-생성">A. 컨테이너 생성</a></li>
  <li><a href="#b.-컨테이너-실행" id="toc-b.-컨테이너-실행" class="nav-link" data-scroll-target="#b.-컨테이너-실행">B. 컨테이너 실행</a></li>
  </ul></li>
  <li><a href="#ubuntu" id="toc-ubuntu" class="nav-link" data-scroll-target="#ubuntu">3. UBUNTU</a>
  <ul class="collapse">
  <li><a href="#a.-passwd" id="toc-a.-passwd" class="nav-link" data-scroll-target="#a.-passwd">A. <code>passwd</code></a></li>
  <li><a href="#b.-update" id="toc-b.-update" class="nav-link" data-scroll-target="#b.-update">B. update</a></li>
  <li><a href="#c.-쓸만한-패키지-설치" id="toc-c.-쓸만한-패키지-설치" class="nav-link" data-scroll-target="#c.-쓸만한-패키지-설치">C. 쓸만한 패키지 설치</a></li>
  <li><a href="#d.-ssh" id="toc-d.-ssh" class="nav-link" data-scroll-target="#d.-ssh">D. <code>ssh</code></a></li>
  <li><a href="#e.-anaconda" id="toc-e.-anaconda" class="nav-link" data-scroll-target="#e.-anaconda">E. anaconda</a></li>
  <li><a href="#f.-vscode" id="toc-f.-vscode" class="nav-link" data-scroll-target="#f.-vscode">F. vscode</a></li>
  <li><a href="#g.-jupyter" id="toc-g.-jupyter" class="nav-link" data-scroll-target="#g.-jupyter">G. Jupyter</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="2023-11-22-DGX staion.out.out.ipynb" download="2023-11-22-DGX staion.out.out.ipynb"><i class="bi bi-journal-code"></i>Jupyter</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><font color="green">MIG = Multi Instance GPU</font></p>
<p><font color="green">gi = GPU Instance <span class="math inline">\(\rightarrow\)</span> 가상의 GPU</font></p>
<p><font color="green">nvidia-smi mig <span class="math inline">\(\rightarrow\)</span> 도움말 보기</font></p>
<section id="mig" class="level1">
<h1>1. MIG</h1>
<section id="a.-mig-모드-enable" class="level2">
<h2 class="anchored" data-anchor-id="a.-mig-모드-enable">A. MIG 모드 enable</h2>
<p><code>-</code> root 획득</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> <span class="at">-i</span> </span></code></pre></div>
<p><font color="green"><span class="math inline">\(\rightarrow\)</span> 관리자 권한 획득</font></p>
<p><code>-</code> 모든 GPU enable</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nvidia-smi</span> <span class="at">-mig</span> 1 </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl stop nvidia-mig-manager.service</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl disable nvidia-mig-manager.service</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="ex">reboot</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nvidia-smi</span> <span class="at">-mig</span> 1 </span></code></pre></div>
<p><font color="green"><span class="math inline">\(\rightarrow\)</span> 여기서 1은 모든 GPU를 의미하는 듯? 즉, 모든 GPU를 mig 모드로 하겠다는 뜻</font></p>
<p><font color="green"><span class="math inline">\(\rightarrow\)</span> mig 모드 해서 GPU를 나누지 않아도 사용하기 때문에, mig 모드 다 해놔도 괜찮~</font></p>
<p><code>-</code> 모든 특정 GPU만 enable</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#nvidia-smi -i {GPUdev-ID} -mig 1</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">nvidia-smi</span> <span class="at">-i</span> 0 <span class="at">-mig</span> 1 </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl stop nvidia-mig-manager.service</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl disable nvidia-mig-manager.service</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="ex">reboot</span> </span></code></pre></div>
<p><font color="green"><span class="math inline">\(\rightarrow\)</span> 왜인진 모르지만.. 위 sudo~ 를 실행해주어야 함..</font></p>
<p><code>-</code> GPU가 MIG 모드로 되면 아래와 같이 GPU-Util 에 <code>N/A</code>로 표시된다. 아래는 0,1,2,4 에 대응하는 GPU가 MIG모드로 설정된 상태임</p>
<div class="img-fluid quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2023-11-22-DGX staion.out_files/figure-html/9fd61bad-2f3d-495e-8a63-5fe4da39a01c-1-94ee7fcb-410f-41f9-9c01-d8c37482a4ad.png" class="img-fluid figure-img"></p>
<figcaption>Screenshot 2023-11-22 at 23.55.06.png</figcaption>
</figure>
</div>
<p><font color="green"><span class="math inline">\(\rightarrow\)</span> 여기에 0,1,2,4의 GPU가 있고, 3은 아님. GPU를 gi로 나누면 MIG deviced에 나타남.</font></p>
<p><font color="green"><span class="math inline">\(\rightarrow\)</span> 단, 나중에 이 4의 GPU는 3으로 보고 gi 만들어야 함.</font></p>
</section>
<section id="b.-gpu-gi-ci-확인" class="level2">
<h2 class="anchored" data-anchor-id="b.-gpu-gi-ci-확인">B. GPU, GI, CI 확인</h2>
<p><code>-</code> 용어정리</p>
<ul>
<li>GPU: 말 그대로 GPU</li>
<li>GI: GPU INSTANCE, 하나의 GPU에 여러개의 GPU INSTANCE가 존재할 수 있음.</li>
<li>CI: COMPUTE INSTANCE, 하나의 GPU INSTANCE에 여러개의 COMPUTE INSTANCE를 만들 수 있음.</li>
</ul>
<p><code>-</code> 상황확인</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nvidia-smi</span> </span></code></pre></div>
<div class="img-fluid quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2023-11-22-DGX staion.out_files/figure-html/552fe216-129f-4466-b613-36dcc56c92cb-1-3dbc6807-1f8d-4114-ab31-f7cf866b7d9a.png" class="img-fluid figure-img"></p>
<figcaption>Screenshot 2023-11-22 at 23.53.41.png</figcaption>
</figure>
</div>
<p><code>-</code> GPU의 해석</p>
<pre><code>+-----------------------------------------------------------------------------+
| NVIDIA-SMI 470.141.03   Driver Version: 470.141.03   CUDA Version: 11.4     |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|                               |                      |               MIG M. |
|===============================+======================+======================|
|   0  NVIDIA A100-SXM...  On   | 00000000:01:00.0 Off |                   On |
| N/A   37C    P0    53W / 275W |      0MiB / 81251MiB |     N/A      Default |
|                               |                      |              Enabled |
+-------------------------------+----------------------+----------------------+
|   1  NVIDIA A100-SXM...  On   | 00000000:47:00.0 Off |                   On |
| N/A   38C    P0    52W / 275W |      0MiB / 81251MiB |     N/A      Default |
|                               |                      |              Enabled |
+-------------------------------+----------------------+----------------------+
|   2  NVIDIA A100-SXM...  On   | 00000000:81:00.0 Off |                   On |
| N/A   37C    P0    54W / 275W |      0MiB / 81251MiB |     N/A      Default |
|                               |                      |              Enabled |
+-------------------------------+----------------------+----------------------+
|   3  NVIDIA DGX Display  On   | 00000000:C1:00.0 Off |                  N/A |
| 36%   39C    P8    N/A /  50W |      1MiB /  3911MiB |      0%      Default |
|                               |                      |                  N/A |
+-------------------------------+----------------------+----------------------+
|   4  NVIDIA A100-SXM...  On   | 00000000:C2:00.0 Off |                   On |
| N/A   37C    P0    55W / 275W |      0MiB / 81251MiB |     N/A      Default |
|                               |                      |              Enabled |
+-------------------------------+----------------------+----------------------+</code></pre>
<p>총 4개의 GPU가 있으며 아이디는 0,1,2,4 임을 알 수 있다.</p>
<p><code>-</code> <code>GPUdev-ID</code>, <code>GI-ID</code>, <code>CI-ID</code>, <code>MIGdev-ID</code> 확인</p>
<pre><code>+-----------------------------------------------------------------------------+
| MIG devices:                                                                |
+------------------+----------------------+-----------+-----------------------+
| GPU  GI  CI  MIG |         Memory-Usage |        Vol|         Shared        |
|      ID  ID  Dev |           BAR1-Usage | SM     Unc| CE  ENC  DEC  OFA  JPG|
|                  |                      |        ECC|                       |
|==================+======================+===========+=======================|
|  1    0   0   0  |      0MiB / 81251MiB | 98      0 |  7   0    5    1    1 |
|                  |      1MiB / 13107... |           |                       |
+------------------+----------------------+-----------+-----------------------+
|  2    0   0   0  |      0MiB / 81251MiB | 98      0 |  7   0    5    1    1 |
|                  |      1MiB / 13107... |           |                       |
+------------------+----------------------+-----------+-----------------------+</code></pre>
<p>아래와 같은 상황을 유추할 수 있다.</p>
<table class="table">
<thead>
<tr class="header">
<th>GPUdev ID</th>
<th>GI ID</th>
<th>CI ID</th>
<th>MIGdev ID</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>0 (80G)</td>
<td>0 (98SM)</td>
<td>0</td>
</tr>
<tr class="even">
<td>2</td>
<td>0 (80G)</td>
<td>0 (98SM)</td>
<td>0</td>
</tr>
</tbody>
</table>
<p><code>-</code> 생성가능한 gi 확인</p>
<div class="img-fluid quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2023-11-22-DGX staion.out_files/figure-html/b8da22f2-f958-4897-9b44-d95715b4dc7b-1-7f61541c-1e4f-42a6-adae-8dda64b4842e.png" class="img-fluid figure-img"></p>
<figcaption>Screenshot 2023-11-22 at 23.56.00.png</figcaption>
</figure>
</div>
<p><code>-</code> 생성가능한 ci 확인</p>
<div class="img-fluid quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2023-11-22-DGX staion.out_files/figure-html/0237e98f-392c-44c3-bbfd-0f9445d216ba-1-5878840a-1cbe-4bb4-b9d5-8c00dba8318b.png" class="img-fluid figure-img"></p>
<figcaption>Screenshot 2023-11-22 at 23.56.31.png</figcaption>
</figure>
</div>
<p><font color="green"><span class="math inline">\(\rightarrow\)</span> cgi = create GPU Instance</font></p>
<p><font color="green"><span class="math inline">\(\rightarrow\)</span> lgip = list of GPU Instance Profiles</font></p>
</section>
<section id="c.-gi-생성" class="level2">
<h2 class="anchored" data-anchor-id="c.-gi-생성">C. GI 생성</h2>
<p><code>-</code> <code>GPUdev</code> = 4 에서 생성가능한 <code>GI</code> 조회</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#nvidia-smi mig -i {GPUdev-ID} -lgip</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="ex">nvidia-smi</span> mig <span class="at">-i</span> 4 <span class="at">-lgip</span></span></code></pre></div>
<div class="img-fluid quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2023-11-22-DGX staion.out_files/figure-html/2fef317d-bcdc-42ff-b94d-eff06b555570-1-b14becf6-d1d4-4b77-bea4-8ef7e748428b.png" class="img-fluid figure-img"></p>
<figcaption>Screenshot 2023-11-22 at 23.57.01.png</figcaption>
</figure>
</div>
<p><code>-</code> 아래에 해당하는 <code>GI</code>를 2개 생성하고 싶다고 하자. (<code>GPU-INSTANCE-PROFILE-ID</code>=9 임을 유의)</p>
<pre><code>+-----------------------------------------------------------------------------+
| GPU instance profiles:                                                      |
| GPU   Name             ID    Instances   Memory     P2P    SM    DEC   ENC  |
|                              Free/Total   GiB              CE    JPEG  OFA  |
|=============================================================================|
|   4  MIG 3g.40gb        9     0/2        39.50      No     42     2     0   |
|                                                             3     0     0   |
+-----------------------------------------------------------------------------+</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#nvidia-smi mig -i {GPUdev-ID} -cgi {GPU-INSTANCE-PROFILE-ID}</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="ex">nvidia-smi</span> mig <span class="at">-i</span> 4 <span class="at">-cgi</span> 9 </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="ex">nvidia-smi</span> mig <span class="at">-i</span> 4 <span class="at">-cgi</span> 9 </span></code></pre></div>
<div class="img-fluid quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2023-11-22-DGX staion.out_files/figure-html/58829801-2572-4406-9324-2fea64cd2622-1-93238ccc-d3af-4ec8-adbf-dc06697186bb.png" class="img-fluid figure-img"></p>
<figcaption>Screenshot 2023-11-22 at 23.57.29.png</figcaption>
</figure>
</div>
<blockquote class="blockquote">
<p>2개까지는 잘 만들어지고 그 이후에는 리소스부족으로 에러발생</p>
</blockquote>
<p><code>-</code> 만들어진 <code>GI</code> 확인</p>
<div class="img-fluid quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2023-11-22-DGX staion.out_files/figure-html/f4c26fc5-2bc0-4c5c-bf2c-311f1906f466-1-57753c13-a73c-43c7-b92a-37d17513f410.png" class="img-fluid figure-img"></p>
<figcaption>Screenshot 2023-11-22 at 23.57.49.png</figcaption>
</figure>
</div>
<p><code>-</code> 생성가능한 <code>CI</code> 확인</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nvidia-smi</span> mig <span class="at">-lcip</span></span></code></pre></div>
<ul>
<li>Note: {GPU ID: GPU INSTANCE ID} 의 조합에서 {1:0}, {2:0}, {4:1}, {4:2}에 해당하는 GI에서 생성가능한 CI들이 각각 출력된다. 4번 GPU의 GI들은 40기가가 한계이므로 생성가능 CI목록이 상대적으로 제한적임을 캐치하라</li>
</ul>
<div class="img-fluid quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2023-11-22-DGX staion.out_files/figure-html/1eb717c7-1800-4d90-acfa-c9337f5f0b54-1-fbefa39d-0ab5-4ce9-830d-f9b4e027a609.png" class="img-fluid figure-img"></p>
<figcaption>Screenshot 2023-11-22 at 23.58.10.png</figcaption>
</figure>
</div>
</section>
<section id="d.-ci-생성" class="level2">
<h2 class="anchored" data-anchor-id="d.-ci-생성">D. CI 생성</h2>
<p><code>-</code> <code>GPUdev</code>=4 에서 생성가능한 <code>CI</code> 조회</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#nvidia-smi mig -i {GPU ID} -lcip</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="ex">nvidia-smi</span> mig <span class="at">-i</span> 4 <span class="at">-lcip</span></span></code></pre></div>
<ul>
<li>Note: 각 GPU-인스턴스(GI)에서는 3개 계산-인스턴스(CI)를 만들수 있음. 만약에 <code>Profile ID = 0</code> 으로 만든다면 14의 계산능력을 가진 CI를 3개까지 만들수 있음, 만약 <code>Profile ID = 2*</code> 로 만든다면 42개의 계산능력을 가진 CI를 1개만 만들 수 있음</li>
</ul>
<div class="img-fluid quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2023-11-22-DGX staion.out_files/figure-html/04053570-7ec1-4ec4-9164-1cdc49db858c-3-868cc9c3-8f7f-4c1c-b937-210feba8dab2.png" class="img-fluid figure-img"></p>
<figcaption>Screenshot 2023-11-22 at 23.59.01.png</figcaption>
</figure>
</div>
<p><code>-</code> {<code>GPUdev-ID</code>:<code>GI-ID</code>} = {4:1} 에서 <code>COMPUTE-INSTANCE-PROFILE-ID</code>=0 에 해당하는 CI를 3개 생성</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#nvidia-smi mig -i {GPUdev-ID} -gi {GI-ID} -cci {COMPUTE-INSTANCE-PROFILE-ID}</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="ex">nvidia-smi</span> mig <span class="at">-i</span> 4 <span class="at">-gi</span> 1 <span class="at">-cci</span> 0</span></code></pre></div>
<ul>
<li>Note: 자원부족으로 3개까지 밖에 못만든다..</li>
</ul>
<div class="img-fluid quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2023-11-22-DGX staion.out_files/figure-html/04053570-7ec1-4ec4-9164-1cdc49db858c-1-38f7552d-ff97-436a-8418-9a28d1e2ec8c.png" class="img-fluid figure-img"></p>
<figcaption>Screenshot 2023-11-22 at 23.59.39.png</figcaption>
</figure>
</div>
<p><code>-</code> {<code>GPUdev-ID</code>:<code>GI-ID</code>}={4:2} 에서 <code>COMPUTE-INSTANCE-PROFILE-ID</code>=2 에 해당하는 CI를 1개 생성</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#nvidia-smi mig -i {GPUdev-ID} -gi {GI-ID} -cci {COMPUTE-INSTANCE-PROFILE-ID}</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="ex">nvidia-smi</span> mig <span class="at">-i</span> 4 <span class="at">-gi</span> 2 <span class="at">-cci</span> 2 </span></code></pre></div>
<ul>
<li>Note: 자원이 부족해서 1개밖에 못 만든다.</li>
</ul>
<div class="img-fluid quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2023-11-22-DGX staion.out_files/figure-html/04053570-7ec1-4ec4-9164-1cdc49db858c-2-3dad4ab6-8877-47d4-a6fe-7ab2a8ea8e1f.png" class="img-fluid figure-img"></p>
<figcaption>Screenshot 2023-11-23 at 00.00.18.png</figcaption>
</figure>
</div>
<p><code>-</code> 현재 상황</p>
<div class="img-fluid quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2023-11-22-DGX staion.out_files/figure-html/04053570-7ec1-4ec4-9164-1cdc49db858c-4-cc3d9b87-c0fc-418f-b76c-9562d558c207.png" class="img-fluid figure-img"></p>
<figcaption>Screenshot 2023-11-23 at 00.01.04.png</figcaption>
</figure>
</div>
<table class="table">
<thead>
<tr class="header">
<th>GPUdev ID</th>
<th>GI ID</th>
<th>CI ID</th>
<th>MIGdev ID</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>0 (80G)</td>
<td>0 (98SM)</td>
<td>0</td>
</tr>
<tr class="even">
<td>2</td>
<td>0 (80G)</td>
<td>0 (98SM)</td>
<td>0</td>
</tr>
<tr class="odd">
<td>4</td>
<td>1 (80G)</td>
<td>0 (14SM)</td>
<td>0</td>
</tr>
<tr class="even">
<td>4</td>
<td>1 (80G)</td>
<td>1 (14SM)</td>
<td>1</td>
</tr>
<tr class="odd">
<td>4</td>
<td>1 (80G)</td>
<td>2 (14SM)</td>
<td>2</td>
</tr>
<tr class="even">
<td>4</td>
<td>2 (80G)</td>
<td>0 (42SM)</td>
<td>3</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="docker" class="level1">
<h1>2. DOCKER</h1>
<section id="a.-컨테이너-생성" class="level2">
<h2 class="anchored" data-anchor-id="a.-컨테이너-생성">A. 컨테이너 생성</h2>
<p><code>-</code> 아래와 같은 방식으로 컨테이너 생성</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># nvidia-docker run --gpus '"device={GPUdev-ID}:{MIGdev-ID}"' -ti --rm -d -t -p {HOST-PORT}:{CONTAINER-PORT} {DOCKER-IMAGE-NAME} /bin/bash</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="ex">nvidia-docker</span> run <span class="at">--gpus</span> <span class="st">'"device=1:0"'</span> <span class="at">-ti</span> <span class="at">--rm</span> <span class="at">-d</span> <span class="at">-t</span> <span class="at">-p</span> 7749:7749  <span class="at">-p</span> 1307:1307 ubuntu /bin/bash</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="ex">nvidia-docker</span> run <span class="at">--gpus</span> <span class="st">'"device=2:0"'</span> <span class="at">-ti</span> <span class="at">-d</span> <span class="at">-t</span> <span class="at">-p</span> 4653:4653  <span class="at">-p</span> 1212:1212 <span class="at">-p</span> 1213:1213 <span class="at">-p</span> 1214:1214 ubuntu /bin/bash</span></code></pre></div>
<ul>
<li><code>-ti</code>: 컨테이너를 대화형(interactive) 모드로 실행. 이 모드에서 컨테이너와 상호작용할 수 있음.</li>
<li><code>--rm</code>: 컨테이너가 종료되면 자동으로 컨테이너를 삭제. 이 옵션을 사용하면 컨테이너를 실행한 후 자동으로 정리.</li>
<li><code>-d</code>: 컨테이너를 백그라운드(background) 모드로 실행. 이 옵션을 사용하면 컨테이너가 백그라운드에서 실행되며 터미널이 차지되지 않음.</li>
<li><code>-t</code>: 컨테이너에 tty (터미널)를 할당. 이것은 대화형 모드와 함께 사용.</li>
<li><code>/bin/bash</code>: 컨테이너가 시작될 때 실행할 명령어. 이 경우, Bash 셸을 실행.</li>
</ul>
<p><font color="green">docker start<span class="math inline">\(\rightarrow\)</span> DOCKER 시작</font></p>
<p><font color="green">docker ps<span class="math inline">\(\rightarrow\)</span> 실행중인 DOCKER container list, ps = process status</font></p>
<p><font color="green">docker ps -a<span class="math inline">\(\rightarrow\)</span> 실행중인 DOCKER container list + stop된 container까지 모두</font></p>
<p><font color="green">docker image ls<span class="math inline">\(\rightarrow\)</span> 다운로드한 이미지 목록</font></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">nvidia-docker</span> run <span class="at">--gpus</span> <span class="st">'"device=2:0"'</span> <span class="at">-ti</span> <span class="at">-d</span> <span class="at">-t</span> <span class="at">-p</span> 4653:4653  <span class="at">-p</span> 1212:1212 ubuntu /bin/bash</span></code></pre></div>
<p><font color="green"><span class="math inline">\(\rightarrow\)</span> gpus 플래그라고 하는데 잘 모르겠음..</font></p>
<p><font color="green"><span class="math inline">\(\rightarrow\)</span> device에서 2번 ID의 0번 gi를 의미함</font></p>
</section>
<section id="b.-컨테이너-실행" class="level2">
<h2 class="anchored" data-anchor-id="b.-컨테이너-실행">B. 컨테이너 실행</h2>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> exec <span class="at">-ti</span> {CONTAINER-ID} bash</span></code></pre></div>
<blockquote class="blockquote">
<p>여기에서 <code>{CONTAINER-ID}</code>는 <code>docker ps</code> 혹은 <code>docker ps -a</code>로 확인한다.</p>
</blockquote>
</section>
</section>
<section id="ubuntu" class="level1">
<h1>3. UBUNTU</h1>
<section id="a.-passwd" class="level2">
<h2 class="anchored" data-anchor-id="a.-passwd">A. <code>passwd</code></h2>
<p><code>-</code> 아래를 실행하여 비밀번호를 바꿀것</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">passwd</span> root</span></code></pre></div>
</section>
<section id="b.-update" class="level2">
<h2 class="anchored" data-anchor-id="b.-update">B. update</h2>
<p><code>-</code> 아래를 실행</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">apt</span> update </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="ex">apt</span> install gcc</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="ex">apt</span> install build-essential</span></code></pre></div>
<p><font color="green">업데이트 해야 <code>vim</code> 설치 되더라구 </font></p>
</section>
<section id="c.-쓸만한-패키지-설치" class="level2">
<h2 class="anchored" data-anchor-id="c.-쓸만한-패키지-설치">C. 쓸만한 패키지 설치</h2>
<p><code>-</code> 아래를 설치하면 좋음..</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">apt</span> install vim </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="ex">apt</span> install openssh-server</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="ex">apt</span> install git</span></code></pre></div>
</section>
<section id="d.-ssh" class="level2">
<h2 class="anchored" data-anchor-id="d.-ssh">D. <code>ssh</code></h2>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># apt install openssh-server</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">vi</span> /etc/ssh/sshd_config </span></code></pre></div>
<pre><code>Port {My-SSH-Port}
PermitRootLogin yes
PasswordAuthentication yes</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">service</span> ssh restart</span></code></pre></div>
<p><font color="green">vi는 에디터임, <code>i</code>누르면 수정하는 거고 <code>esc</code>누르면 나옴.</font></p>
<p><font color="green"><code>shift</code> + <code>;</code>로 <code>:</code> 만들면 text 작성 칸 나오는데, <code>q</code>하면 나오기 <code>wq</code>하면 저장하고 나오기 <code>q!</code>하면 강제 종료하기 임</font></p>
<p><font color="green">수정하고 그냥 <code>q</code>하려하면 안 나와진다.</font></p>
</section>
<section id="e.-anaconda" class="level2">
<h2 class="anchored" data-anchor-id="e.-anaconda">E. anaconda</h2>
<p><code>-</code> <a href="https://miruetoto.github.io/yechan3/posts/4_Notes/2000-01-02-%EC%9A%B0%EB%B6%84%ED%88%AC%20%ED%8F%AC%EB%A7%B7%20%EB%B0%8F%20%EA%B0%9C%EB%B0%9C%EC%9A%A9%20%EC%84%9C%EB%B2%84%20%EC%85%8B%ED%8C%852.html#%EC%95%84%EB%82%98%EC%BD%98%EB%8B%A4">여기참고..</a></p>
</section>
<section id="f.-vscode" class="level2">
<h2 class="anchored" data-anchor-id="f.-vscode">F. vscode</h2>
<p><code>-</code> 아래를 이용하여 설치</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-Lk</span> <span class="st">'https://code.visualstudio.com/sha/download?build=stable&amp;os=cli-alpine-x64'</span> <span class="at">--output</span> vscode_cli.tar.gz</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xf</span> vscode_cli.tar.gz</span></code></pre></div>
<p><code>-</code> 아래를 이용하여 초기 설정 (깃헙아이디로 인증)</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./code</span> tunnel </span></code></pre></div>
<p><code>-</code> 초기설정 이후 아래를 이용하여 백그라운드에서 실행</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nohup</span> ./code tunnel <span class="kw">&amp;</span></span></code></pre></div>
</section>
<section id="g.-jupyter" class="level2">
<h2 class="anchored" data-anchor-id="g.-jupyter">G. Jupyter</h2>
<p><code>-</code> 암호설정: <a href="https://miruetoto.github.io/yechan3/posts/4_Notes/2000-01-02-%EC%9A%B0%EB%B6%84%ED%88%AC%20%ED%8F%AC%EB%A7%B7%20%EB%B0%8F%20%EA%B0%9C%EB%B0%9C%EC%9A%A9%20%EC%84%9C%EB%B2%84%20%EC%85%8B%ED%8C%852.html#a.-%EC%A3%BC%ED%94%BC%ED%84%B0-%EC%9B%90%EA%B2%A9%EC%A0%9C%EC%96%B4-%EC%84%A4%EC%A0%95">여기로..</a></p>
<p><code>-</code> 주피터 실행할때 아래로 실행</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">jupyter</span> lab <span class="at">--ip</span><span class="op">=</span><span class="st">"0.0.0.0"</span> <span class="at">--port</span><span class="op">=</span>{MY-PORT} <span class="at">--no-browser</span> <span class="at">--allow-root</span></span></code></pre></div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="seoyeonc/sy_hub" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->




</body></html>